function GetQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=window.location.search.substring(1).match(t);return null!=a?unescape(a[2]):null}function resizeFont(){var e=document.documentElement,t=e.clientWidth;t&&(e.style.fontSize=t/750*100+"px")}function initScreen(){function e(){if(180==window.orientation||0==window.orientation)var e=setInterval(function(){var t=document.documentElement;t.clientWidth<t.clientHeight&&(clearInterval(e),$(".mask").hide(),resizeFont())},100);90!=window.orientation&&-90!=window.orientation||$(".mask").show()}e(),window.addEventListener("onorientationchange"in window?"orientationchange":"resize",e,!1);var t=document.getElementById("mask");t.addEventListener("touchstart",function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},!1),t.addEventListener("touchmove",function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},!1)}function resourceTiming(){return performance.getEntriesByType("resource").length}function IndexSlide(e){this.container=e.container||null,this.variable=e.variable||!1,this.changeCallback=e.changeCallback||function(){},this.proto=e.protoType||this,this.slide,this.isFirst=!0,this.init(),this.timeout}function mouseout(e){e.className=" "}function hover(e){e.className="hover"}function TGDialogS(e){need("biz.dialog-min",function(t){t.show({id:e,bgcolor:"#000",opacity:50})})}function closeDialog(){need("biz.dialog-min",function(e){e.hide()})}!function(e){e.Callbacks=function(t){t=e.extend({},t);var a,i,n,o,r,s,c=[],l=!t.once&&[],d=function(e){for(a=t.memory&&e,i=!0,s=o||0,o=0,r=c.length,n=!0;c&&s<r;++s)if(!1===c[s].apply(e[0],e[1])&&t.stopOnFalse){a=!1;break}n=!1,c&&(l?l.length&&d(l.shift()):a?c.length=0:p.disable())},p={add:function(){if(c){var i=c.length,s=function(a){e.each(a,function(e,a){"function"==typeof a?t.unique&&p.has(a)||c.push(a):a&&a.length&&"string"!=typeof a&&s(a)})};s(arguments),n?r=c.length:a&&(o=i,d(a))}return this},remove:function(){return c&&e.each(arguments,function(t,a){for(var i;(i=e.inArray(a,c,i))>-1;)c.splice(i,1),n&&(i<=r&&--r,i<=s&&--s)}),this},has:function(t){return!(!c||!(t?e.inArray(t,c)>-1:c.length))},empty:function(){return r=c.length=0,this},disable:function(){return c=l=a=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,a||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!c||i&&!l||(t=t||[],t=[e,t.slice?t.slice():t],n?l.push(t):d(t)),this},fire:function(){return p.fireWith(this,arguments)},fired:function(){return!!i}};return p}}(Zepto),function(e){function t(a){var i=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],n="pending",o={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var a=arguments;return t(function(t){e.each(i,function(i,n){var s=e.isFunction(a[i])&&a[i];r[n[1]](function(){var a=s&&s.apply(this,arguments);if(a&&e.isFunction(a.promise))a.promise().done(t.resolve).fail(t.reject).progress(t.notify);else{var i=this===o?t.promise():this,r=s?[a]:arguments;t[n[0]+"With"](i,r)}})}),a=null}).promise()},promise:function(t){return null!=t?e.extend(t,o):o}},r={};return e.each(i,function(e,t){var a=t[2],s=t[3];o[t[1]]=a.add,s&&a.add(function(){n=s},i[1^e][2].disable,i[2][2].lock),r[t[0]]=function(){return r[t[0]+"With"](this===r?o:this,arguments),this},r[t[0]+"With"]=a.fireWith}),o.promise(r),a&&a.call(r,r),r}var a=Array.prototype.slice;e.when=function(i){var n,o,r,s=a.call(arguments),c=s.length,l=0,d=1!==c||i&&e.isFunction(i.promise)?c:0,p=1===d?i:t(),m=function(e,t,i){return function(o){t[e]=this,i[e]=arguments.length>1?a.call(arguments):o,i===n?p.notifyWith(t,i):--d||p.resolveWith(t,i)}};if(c>1)for(n=new Array(c),o=new Array(c),r=new Array(c);l<c;++l)s[l]&&e.isFunction(s[l].promise)?s[l].promise().done(m(l,r,s)).fail(p.reject).progress(m(l,o,n)):--d;return d||p.resolveWith(r,s),p.promise()},e.Deferred=t}(Zepto),function(e){e.getScript=function(e,t){var a=document.createElement("script");a.async="async",a.src=e,t&&(a.onload=t),document.getElementsByTagName("head")[0].appendChild(a)},e.fn.scrollTo=function(t){var a={toT:0,durTime:500,delay:30,dir:"top",callback:null},i=e.extend(a,t),n=null,o=this,r=o.scrollTop(),s=o.scrollLeft(),c=0,l=Math.round(i.durTime/i.delay),d=i.dir,p="top"==d?i.toT-r:i.toT-s;return smoothScroll=function(e){c++;var t=Math.round(p/l);if(c>=l)return"top"==d?o.scrollTop(e):o.scrollLeft(e),window.clearInterval(n),void(i.callback&&"function"==typeof i.callback&&i.callback());"top"==d?o.scrollTop(r+c*t):o.scrollLeft(s+c*t)},n=window.setInterval(function(){smoothScroll(i.toT)},i.delay),o},e.extend(e.fn,{cookie:function(t,a,i){var n,o,r,s;return arguments.length>1&&"[object Object]"!==String(a)?(i=e.extend({},i),null!==a&&void 0!==a||(i.expires=-1),"number"==typeof i.expires&&(n=24*i.expires*60*60*1e3,o=i.expires=new Date,o.setTime(o.getTime()+n)),a=String(a),document.cookie=[encodeURIComponent(t),"=",i.raw?a:encodeURIComponent(a),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")):(i=a||{},s=i.raw?function(e){return e}:decodeURIComponent,(r=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?s(r[1]):null)}})}($);var G_biz=18,G_Source="web_m",encodeParam="E5CB3C064B7A772867B1B552594434FCA26621A002CCB5AF47407E70297E2D6EE7962AC5C4D05234943B0144EDFBDCC4C2A285820C8983E5DE4E22B38EF167CCCA62220D5B3FF8BF83283431B8FF17FB790EDAA0932201873DEC7556F3CFF3AD325B51D6FF5A451618921BA48FF6818B53191FA3C7ED56E51021350FDC66A01CB44BB53178F3C501",HOTURL="//pvp.ingame.qq.com/php/ingame/smoba/top_heros.php?partition=1119&roleid=90876401&area=1&physicalID=1&algorithm=v2&version=2.14.6a&timestamp=1493112232746&appid=1104466820&sig=11a92c24e8f0d1fc74e31bb8c5203a09&encode=2&msdkEncodeParam="+encodeParam+"&game=smoba&start=1&num=10&ordertype=1&filter=0&grade=-1&herotype=0&matchtype=2",VALUABLEURL="//pvp.ingame.qq.com/php/ingame/smoba/get_valuable_book.php?partition=1119&roleid=90876401&area=1&physicalID=1&algorithm=v2&version=2.14.6a&timestamp=1493112232746&appid=1104466820&sig=11a92c24e8f0d1fc74e31bb8c5203a09&encode=2&msdkEncodeParam="+encodeParam+"&game=smoba&start=1&num=20&ordertype=1&filter=0&grade=-1&herotype=0&matchtype=2&heroid=",HEROLISTURL="//pvp.qq.com/web201605/js/herolist.json",HEROIDURL="//game.gtimg.cn/images/yxzj/m/m201706/utf8/heroid.js",isPassDue=!1,itagObj={194:"1625",198:"1626",187:"835",149:"836",175:"837",171:"838",113:"839",168:"840",108:"841",114:"842",105:"843",120:"844",135:"845",144:"847",193:"1285",180:"849",178:"850",163:"851",183:"852",126:"853",140:"854",123:"855",134:"856",139:"858",129:"859",128:"860",166:"861",167:"862",117:"863",107:"864",130:"928",170:"929",179:"1629",182:"865",190:"866",157:"867",141:"868",121:"869",156:"870",142:"871",109:"872",119:"873",152:"874",115:"875",136:"876",106:"877",124:"878",127:"879",148:"880",110:"881",196:"1295",199:"1654",192:"882",177:"883",132:"884",174:"885",173:"886",112:"889",111:"890",133:"891",169:"892",189:"1199",501:"1636",176:"1754",191:"893",186:"894",184:"895",118:"896",195:"1368",131:"897",162:"898",153:"899",154:"900",150:"901",146:"902",116:"903",502:"1755",197:"1823",503:"1858",504:"1856",522:"3001",518:"3504",523:"3047"};setTimeout(function(){$.ajax({url:HEROIDURL,dataType:"script",scriptCharset:"utf-8",success:function(e){if(null!=localStorage.getItem("module_exports")){var t=localStorage.getItem("module_exports"),a=JSON.stringify(module_exports);t!=a&&(isPassDue=!0,localStorage.setItem("module_exports",a),localStorage.setItem("perosonList",JSON.stringify(perosonList)))}else localStorage.setItem("module_exports",JSON.stringify(module_exports)),localStorage.setItem("perosonList",JSON.stringify(perosonList))}})},0),$(function(){var e=0,t=(function(){var t=window.location.href;if(/index/.test(t)){if(/matchindex/.test(t))return $(".home_bottom li").eq(2).addClass("currentL"),void(e=3);$(".home_bottom li").eq(0).addClass("currentL"),e=0}else/video/.test(t)?($(".home_bottom li").eq(1).addClass("currentL"),e=1):/strategy/.test(t)&&($(".home_bottom li").eq(1).addClass("currentL"),e=2)}(),function(t){switch(t.type){case"swiperight":e--;break;case"swipeleft":e++;break;case"tap":return window.location.href=t.orginEvent.target.href,!1;default:return}if(e<0)return e=0,!1;if(e>3)return e=3,!1;var a="";switch(e){case 0:a="//pvp.qq.com/m/index.shtml";break;case 1:a="//pvp.qq.com/m/m201606/video.shtml";break;case 2:a="m201706/strategycenter.shtml";break;case 3:a="//pvp.qq.com/m/m201606/matchindex.shtml";break;default:return}window.location.href=a});if(document.getElementById("main-nav")){var a=document.getElementById("main-nav");void 0==typeof Zepto&&$.getScript("//ossweb-img.qq.com/images/js/motion/gesture.min.js",function(){new mo.Gesture(a).addGesture("swiperight swipeleft tap",t)})}!function(e){var t=document.body.scrollTop,e=e||function(){};window.addEventListener("scroll",function(){var a=document.body.scrollTop,i=a-t;if(0===i)return!1;e(i>0?"down":"up"),t=a},!1)}(function(e){document.body.scrollTop>document.body.offsetHeight&&"up"==e?$("#main-nav").addClass("fix-bottom"):$("#main-nav").removeClass("fix-bottom")}),initScreen()}),window.reportSpeed=function(e,t){var a="flag1="+e[0]+"&flag2="+e[1]+"&flag3="+e[2]+"&flag5="+e[3]+"&1="+t.t1+"&2="+t.t2+"&3="+t.t3+"&4="+t.t4+"&5="+t.t5+"&6="+t.t6+"&7="+t.t7;(new Image).src="//report.huatuo.qq.com/report.cgi?appid=20286&platform=unknown&speedparams="+encodeURIComponent(a)},window.tgaxSpeed=function(e){var t=0,a=0,i=setInterval(function(){a=resourceTiming(),a==t?(speed_all_load=new Date,speed_all_load-=50,window.reportSpeed(e),clearInterval(i)):t=a},50)};var G_biz=18,G_Source="web_m",order="sIdxTime",G_Detail="detail.shtml",G_IsGo=!0,G_Go="detail.shtml",search="",Page=1,PageSize=4,Type="all",TypeId=0,shtml="",typename="",pageTotal=1,G_NewsDetail="newCont.shtml",PageSize1=4,Type1="iType",TypeId1=0,BizTypeInfo={status:"0",msg:{1:"cf",2:"sm",3:"lol",4:"age",5:"bns",6:"codol",7:"dnf",8:"speed",9:"nba2k",10:"wt",11:"stg",13:"mhzx",14:"nz",15:"jf",16:"moba",18:"pvp",19:"yl",20:"feiji",21:"mho",22:"wuxia",24:"mx",25:"hyrz",26:"xlx",27:"tgl",28:"nfsol",29:"huoying",30:"ds",31:"poe",32:"x5",34:"cfm",35:"eafifa",36:"sg",37:"pao",38:"3vs3",39:"she",40:"hbp",41:"dn",42:"qhyx",44:"qqxy",45:"tfol",47:"hdl",48:"mxd2",49:"ep",51:"zhetianji",65:"slg",66:"mv2",67:"rf",68:"bsw",69:"nextjp",70:"speedm",71:"cfw"}};window.API={FIRSTTYPE:"//ams.qq.com/wmp/data/js/v3/WMP_PARENTTYPE_GW_18.js",SUBTYPE:"//ams.qq.com/wmp/data/js/v3/WMP_TYPELIST_GW_18.js",KETWORDLIST:"//ams.qq.com/wmp/data/js/v3/WMP_KEYWORDLIST_GW_18.js",VIDEOLIST:"//apps.game.qq.com/wmp/v3.1/?p0=18&p1=searchKeywordsList&page=1&pagesize=30&order=sIdxTime&r0=cors&r1=userObj&source=app_search",NEWSLIST:"//apps.game.qq.com/wmp/v3.1/?p0=18&p1=searchNewsKeywordsList&order=sIdxTime&r0=cors&r1=NewsObj&type=iType&source=app_news_search"};var encodeParam="E5CB3C064B7A772867B1B552594434FCA26621A002CCB5AF47407E70297E2D6EE7962AC5C4D05234943B0144EDFBDCC4C2A285820C8983E5DE4E22B38EF167CCCA62220D5B3FF8BF83283431B8FF17FB790EDAA0932201873DEC7556F3CFF3AD325B51D6FF5A451618921BA48FF6818B53191FA3C7ED56E51021350FDC66A01CB44BB53178F3C501",Hero={heroData:{}||[],heroList:[[],[],[],[],[],[]],hotList:{}||[],heroAvatar:{}||[],dataDone:[!1,!1,!1,!1,!1,!1,!1],start:0,end:0,init:function(){this.getData()},getData:function(){var e=this;$.ajax({url:HEROLISTURL,dataType:"json",success:function(t){localStorage.setItem("herolist",JSON.stringify(t)),e.heroData=t,e.getAvatar(),e.initHeroListData()},error:function(e){}})},initHeroListData:function(){var e=this;$.each(e.heroData,function(t,a){var i=parseInt(a.hero_type)-1;if(e.heroList[i].push(a),a.hero_type2){var n=parseInt(a.hero_type2)-1;e.heroList[n].push(a)}})},getAvatar:function(){var e=this;localStorage.removeItem("heroavatar"),localStorage.getItem("heroavatar")?(e.heroAvatar=JSON.parse(localStorage.getItem("heroavatar")),e.getHeroHot()):$.ajax({url:"//game.gtimg.cn/images/yxzj/m/m201706/js/heroAvatar.json",dataType:"json",success:function(t){e.heroAvatar=t,localStorage.setItem("heroavatar",JSON.stringify(t)),e.getHeroHot()},error:function(e){}})},initHeroList:function(e){var t=["zhanshi","fashi","tanke","cike","sheshou","fuzhu"],a=t.indexOf(e);if(!(a<0)){var i=this,n="",o=["zhanshi_details","fashi_details","Tank_details","cike_details","sheshou_details","fuzhu_details"],r=["战士详情","法师详情","坦克详情","刺客详情","射手详情","辅助详情"];$.each(i.heroList[a],function(e,t){var i="//game.gtimg.cn/images/yxzj/img201606/heroimg/"+t.ename+"/"+t.ename+".jpg";n+='<li><a href="//pvp.qq.com/web201605/herodetail/m/'+t.ename+".html\" onclick=\"PTTSendClick('hero','"+o[a]+"','"+r[a]+'\');"><img src="'+i+'" width="91px" alt="'+t.cname+'"><h3>'+t.cname+"</h3></a></li>"}),$("#hero-"+e).html(n)}},getHeroHot:function(){var e=this,t="//pvp.ingame.qq.com/php/ingame/smoba/top_heros.php?partition=1119&roleid=90876401&area=1&physicalID=1&algorithm=v2&version=2.14.6a&timestamp=1493112232746&appid=1104466820&sig=11a92c24e8f0d1fc74e31bb8c5203a09&encode=2&msdkEncodeParam="+encodeParam+"&game=smoba&start=1&num=10&ordertype=1&filter=0&grade=-1&herotype=0&matchtype=2";$.ajax({url:t,dataType:"jsonp",success:function(t){if("SUCCESS"==t.status){for(var a=t.data.herolist,i=0;i<10;i++){var n=a[i].heroid;""!=module_exports[n]&&(e.hotList[i]=[],e.hotList[i].key=n,e.hotList[i].value=module_exports[n])}e.initHotList()}},error:function(e){}})},initHotList:function(){var e=this,t="";for(var a in e.hotList){var i=e.hotList[a],n="//game.gtimg.cn/images/yxzj/img201606/heroimg/"+i.key+"/"+i.key+".jpg";t+="<li>",t+='<a href="//pvp.qq.com/web201605/herodetail/m/'+i.key+".html\" onclick=\"PTTSendClick('hero','hot_details','热门详情');\">",t+='<img src="'+n+'" width="91px" alt="'+i.value+'"><h3>'+i.value,t+="</h3></a>",t+="</li>"}$("#hero-hot").html(t),e.dataDone[0]=!0,window.heroSlide=new IndexSlide({container:".hero-slide",variable:!0,changeCallback:e.slideCallback,protoType:Hero})},slideCallback:function(e,t){var a=t;switch(e){case 1:a.dataDone[e]||(a.dataDone[e]=!0,a.initHeroList("zhanshi"));break;case 2:a.dataDone[e]||(a.dataDone[e]=!0,a.initHeroList("fashi"));break;case 3:a.dataDone[e]||(a.dataDone[e]=!0,a.initHeroList("tanke"));break;case 4:a.dataDone[e]||(a.dataDone[e]=!0,a.initHeroList("cike"));break;case 5:a.dataDone[e]||(a.dataDone[e]=!0,a.initHeroList("sheshou"));break;case 6:a.dataDone[e]||(a.dataDone[e]=!0,a.initHeroList("fuzhu"));break;default:return}}},Video={dataDone:[!1,!1,!1,!1],init:function(){this.dataDone=[!1,!1,!1,!1],this.getLatestVideo("item2","iTag")},getLatestVideo:function(e,t){var a=this,i="";i="item1"==e?"931":"1371,1809,1855,2484,2609,1379,1757,943,953";var n="";n="iTag"==t?"iTag":"iKeyword";var o=[],r=API.VIDEOLIST+"&id="+encodeURI(i)+"&type="+n,o=[];$.ajax({url:r,dataType:"json",success:function(t){for(var i=t,n=i.msg.result,r=0;r<n.length;r++)o.push(n[r]);o.sort(function(e,t){return a.compareTime(t.sCreated)-a.compareTime(e.sCreated)});var s=o.slice(0,4);"item1"==e?$("#index_video_list2").html(a.pushData(s,8,"match_details")):($("#index_video_list").html(a.pushData(s,8,"nav1_details")),a.dataDone[0]=!0,window.videoSlide=new IndexSlide({container:".video-slide",variable:!1,changeCallback:a.slideCallback,protoType:Video}))},error:function(e){}})},linkInfoPro:function(e,t,a,i,n,o){return parseInt(o)&&!/v.qq.com/.test(e)?G_Go+"?G_Biz="+G_biz+"&tid="+t+"&e_code="+a+"."+i+"."+n:0!=t?""==e||/v.qq.com/.test(e)||/egame.qq.com/.test(e)||/detail/.test(e)||!G_IsGo?G_Detail+"?G_Biz="+G_biz+"&tid="+t+"&e_code="+a+"."+i+"."+n:G_Go+"?G_Biz="+G_biz+"&tid="+t+"&e_code="+a+"."+i+"."+n:e},pushData:function(e,t,a){for(var i=this,n="",o=e.length>t?t:e.length,r=0;r<o;r++){var s=i.linkInfoPro(e[r].sUrl,e[r].iVideoId,BizTypeInfo.msg[G_biz]+G_Source,"statictypenew","type"+e[r].iType);n+="<li>",n+="<a onclick=\"PTTSendClick('video','"+a+"','详情');\" href=\"//pvp.qq.com/m/m201606/"+s+'" target="_blank" title="'+e[r].sTitle+'">',n+='<img src="'+e[r].sIMG+'" /><span class="ico_play"></span><span class="video_title">'+e[r].sTitle+"</span>",n+="</a>",n+='<div class="v_infor">',n+='<span class="v_num"><span class="ico_video_num"></span>'+e[r].iTotalPlay+"</span>",n+='<span class="v_time">'+e[r].sCreated.substr(5,5)+"</span></div></li>"}return n},getNewHeroVideo:function(){var e=this,t=[623,619,675,641],a="",i=0;$.each(t,function(t,n){var o="//ams.qq.com/wmp/data/js/v3/WMP_VIDEOLIST_GW_18_"+n+".js";e.getData(o,"resObj_"+n,"newlist"+n).then(function(t){i++,a+=e.pushData(t,1,"hero_details"),4==i&&$("#index_video_list1").html(a)})})},getNewMatchVideo:function(){var e=this,t="";e.getData("//ams.qq.com/wmp/data/js/v3/WMP_VIDEOLIST_GW_18_751.js","resObj_751","newlist751").then(function(a){t+=e.pushData(a,4,"video_details"),$("#index_video_list3").html(t)})},getData:function(_url,_res,_typeObj){var dtd=$.Deferred();return getScript(_url,function(){eval("var tmpObj ="+_res+";"),"object"==typeof tmpObj&&(0==tmpObj.status?dtd.resolve(tmpObj.msg[_typeObj]):dtd.reject(tmpObj.msg[_typeObj]))}),dtd.promise()},slideCallback:function(e,t){var a=t;switch(e){case 1:a.dataDone[e]||(a.dataDone[e]=!0,a.getNewHeroVideo());break;case 2:a.dataDone[e]||(a.dataDone[e]=!0,a.getLatestVideo("item1","iTag"));break;case 3:a.dataDone[e]||(a.dataDone[e]=!0,a.getNewMatchVideo());break;default:return}},compareTime:function(e){return parseInt(new Date(Date.parse(e)).getTime())}},Strategy={index:0,pageSize:4,typeIdArr:[0,103,111,77,76],pageArr:[1,1,1,1,1],pttName:[["Newest_details","最新详情"],["hero_details","英雄详情"],["notice_details","新手详情"],["guanfang_details","官方详情"],["tongren_details","同人详情"]],$container:null,dataDone:[!1,!1,!1,!1,!1],init:function(){this.initLatest()},initLatest:function(){var e=this;e.dataDone[0]=!0,e.$container="#index_str_list",e.getData(e.typeIdArr[e.index],1),this.bindScroll(),window.strategySlide=new IndexSlide({container:".strategy-slide",variable:!0,changeCallback:e.slideCallback,protoType:Strategy})},getData:function(e,t){var a=this,i="";i=0==e?API.NEWSLIST+"&pagesize="+a.pageSize+"&page="+t:API.NEWSLIST+"&pagesize="+a.pageSize+"&page="+t+"&id="+e,$.ajax({url:i,dataType:"json",success:function(e){var t=e;if("0"==t.status){var i=a.pushData(t.msg.result,a.pageSize,a.pttName[a.index][0],a.pttName[a.index][1]);$(a.$container).append(i),$("#videoNav").parent().css("height",7.4*a.pageArr[a.index]+"rem")}}})},pushData:function(e,t,a,i){for(var n=this,o="",r=e.length>t?t:e.length,s=0;s<r;s++){var c=e[s];o+="<li>",o+="<a onclick=\"PTTSendClick('image','"+a+"','"+i+'\');" href="//pvp.qq.com/m/m201606/'+n.linkNewsInfo(c.sUrl,c.iNewsId)+'" class="strategy_pic" ><img src="'+c.sIMG+'" alt="'+c.sTitle+'"/></a>',o+="<div class=\"strategy_cont\"><a onclick=\"PTTSendClick('image','"+a+"','"+i+'\');" href="//pvp.qq.com/m/m201606/'+n.linkNewsInfo(c.sUrl,c.iNewsId)+'">',o+='<span  class="strategy_title">'+c.sTitle+"</span>",o+='<span class="strategy_desc">'+c.sDesc+"</span>",o+='<span class="strategy_num">'+c.iTotalPlay+'<span class="ico_read_num"></span></span>',o+='<span class="strategy_time">'+c.sCreated.substr(5,5)+"</span>",o+="</a></div>",o+="</li>"}return o},linkNewsInfo:function(e,t,a){return 0!=t?(""==e||/newsDetail/.test(e),G_NewsDetail+"?G_Biz="+G_biz+"&tid="+t):e},bindScroll:function(){var e=this;$(window).scroll(function(){var t=$(this).scrollTop(),a=$(document).height();if(t+$(this).height()+1>=a){var i=e.index,n=e.typeIdArr[i],o=e.pageArr[i];o++,o<=4&&o>1?(e.pageArr[i]=o,e.getData(n,o)):$(".load-more a").attr("href","/m/m201706/strategycenter.shtml").text("点击查看更多")}})},slideCallback:function(e,t){var a=t;switch(a.index=e,e){case 1:a.dataDone[e]||(a.dataDone[e]=!0,a.getData(a.typeIdArr[e],1),a.$container="#index_str_list1");break;case 2:a.dataDone[e]||(a.dataDone[e]=!0,a.getData(a.typeIdArr[e],1),a.$container="#index_str_list2");break;case 3:a.dataDone[e]||(a.dataDone[e]=!0,a.getData(a.typeIdArr[e],1),a.$container="#index_str_list3");break;case 4:a.dataDone[e]||(a.dataDone[e]=!0,a.getData(a.typeIdArr[e],1),a.$container="#index_str_list4");break;default:return}}};IndexSlide.prototype={init:function(){var e=this;e.slide=new mo.Slide({target:$(e.container+" .slide-item"),direction:"x",event:{init:function(){$("#barba-wrapper").on("click",e.container+" .slide-nav li",function(){var t=$(this).index();e.slide.playTo(t)})},beforechange:function(){var t=0;this.curPage&&(t=this.curPage),e.changeCallback(t,e.proto),$(e.container+" .slide-nav li").eq(t).addClass("currentL").siblings().removeClass("currentL")},change:function(){var t=parseFloat(document.documentElement.style.fontSize);if(clearTimeout(e.timeout),e.variable){var a=$(e.container+" .slide-content .slide-item").eq(e.slide.curPage).height();e.isFirst?e.isFirst=!1:$(e.container).height(a/t+.68+"rem")}}}})}};var IndexObj={popData:{},chooseNewsName:function(e){return-1!==e.indexOf("655")?"新闻":-1!==e.indexOf("656")?"公告":-1!==e.indexOf("1139")?"活动":-1!==e.indexOf("658")?"赛事":"热门"},initNews:function(e){var t=e,a="//apps.game.qq.com/wmp/v3.1/?p0=18&p1=searchNewsKeywordsList&page=1&order=sIdxTime&r0=cors&r1=NewsObj&type=iTarget&",i=["1760","1761","1762","1763","1764"];if(a+="pagesize=5&id=",""==$(".news-slide-wrapper .news_list").eq(t).text().trim()){var n=[];$.ajax({url:a+i[t],dataType:"json",success:function(e){n=0==e.status?e.msg.result:[];for(var a="",i=0;i<n.length;i++){var o=n[i],r=IndexObj.linkNewsInfo(o.sUrl,o.iNewsId),s=o.sIdxTime,c=s.split(" ")[0].split("-");a+='<li><a href="//pvp.qq.com/m/m201606/newCont.shtml?'+r+'"><span class="category">['+IndexObj.chooseNewsName(o.sTagIds)+']</span><span class="split">|</span><span class="title">'+o.sTitle+'</span><span class="time">'+c[1]+"/"+c[2]+"</span></a></li>"}$(".news-slide-wrapper .news_list").eq(t).html(a)},error:function(e){}})}},linkNewsInfo:function(e,t,a){return 0!=t?(""==e||/newsDetail/.test(e),G_NewsDetail+"?G_Biz="+G_biz+"&tid="+t):e},initAd:function(){var e,t=0;getScript("https://game.qq.com/time/qqadv/Info_new_15223.js",function(){var a="";for(var i in oDaTaNew15223){var n=oDaTaNew15223[i];t++,1==t&&(e=document.createElement("img"),e.setAttribute("src","//ossweb-img.qq.com/upload/adw/"+n[2])),a+='<li class="slide-item"><a target="_blank" href="'+n[1]+'"><img src="//ossweb-img.qq.com/upload/adw/'+n[2]+'" alt="'+n[0]+' title="'+n[0]+' data-detail="" width="640" height="272"></a></li>'}e.onload=function(){$("#slide ul").html(a),window.tab1=new mo.Slide({target:$("#slide li"),autoPlay:!0,stay:3e3,animateTime:500,direction:"x",controller:!0,circle:!0})};var o=new Date,r="https://apps.game.qq.com/eas/comm/eas.php?m=SendLog&show_ads=15223.16301.281373.385941|15223.16300.281369.385937|15223.16299.281376.385946&click_type=1&t="+o.getTime();(new Image).src=r})},initPopVideo:function(){function e(e){$("#video_pop").css({background:"url(//game.gtimg.cn/images/yxzj/m/m201706/images/bg/video-pop.jpg) no-repeat","margin-top":"-2.6rem","margin-left":"-3.68rem"}),n(e),$(".video_mask").show(),$("#video_pop").show()}function t(){return"MicroMessenger"==navigator.userAgent.match(/MicroMessenger/i)}function a(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}function i(e){t()&&a()?"object"==typeof WeixinJSBridge?WeixinJSBridge.invoke("WeixinJSBridgeReady",{},function(t){e()}):document.addEventListener("WeixinJSBridgeReady",function(t){e()},!1):e()}function n(e){getScript("//imgcache.gtimg.cn/tencentvideo_v1/tvp/js/tvp.player_v2.js",function(){var t=new tvp.VideoInfo;t.setChannelId(e),(new tvp.Player).create({width:"100%",height:"3.9rem",type:1,video:t,modId:"mod_player",isHtml5UseAirPlay:!0,isHtml5UseFakeFullScreen:!0,autoplay:!0}),i(function(){$(".tvp_overlay_play").click()})})}var o=this,r=new Date,s=r.getMonth()+1+"-"+r.getDate();null==localStorage.getItem("popDate")?localStorage.setItem("popDate",s):localStorage.getItem("popDate")!=s&&(localStorage.setItem("popDate",s),localStorage.removeItem("videoPop"),localStorage.removeItem("imgPop"));var c=$(".popvideo-data .ams-cid").text();if(o.popData.img=$(".popvideo-data .ams-imageurl").text(),o.popData.popCount=parseInt($(".popvideo-data .ams-popcount").text()),o.popData.popCount>0)if(null==localStorage.getItem("videoPop"))e(c),localStorage.setItem("videoPop",1);else{var l=parseInt(localStorage.getItem("videoPop"));l<o.popData.popCount&&(e(c),l++,localStorage.setItem("videoPop",l))}else o.initPopImg()},initPopImg:function(){function e(e){var t="",a=unescape(e.sDetailUrl);t=a.indexOf("?")>-1?a+"&ADTAG=pvp.mobile.kv":a+"?ADTAG=pvp.mobile.kv",$(".home-pop-link").attr("href",t),$(".home-pop-img").attr("src",unescape(e.sInfoImageAddr));var i=document.createElement("img");i.setAttribute("src",unescape(e.sInfoImageAddr)),i.onload=function(){$("#home-pop").show()}}var t=parseInt($(".popimg-data .ams-popcount").text());if(t>0){var a={};if(a.sInfoImageAddr=$(".popimg-data .ams-imageurl").text(),a.sDetailUrl=$(".popimg-data .ams-detailurl").text(),null==localStorage.getItem("imgPop"))e(a),localStorage.setItem("imgPop",1);else{var i=parseInt(localStorage.getItem("imgPop"));i<t&&(e(a),i++,localStorage.setItem("imgPop",i))}}},getQuickEntry:function(){var e=$(".entry-data .txt").text();e=JSON.parse(e),this.initQuickEntry(e)},initQuickEntry:function(e){var t={name:"敬请期待",url:"javascript:;",ptt:"'quickLink','coming','敬请期待'",new:"",class:"disable",endTime:""};e.length<4?(e.push(t),this.initEntryDom(e)):4==e.length?this.initEntryDom(e):e.length>4&&e.length<8?($(".home_nav").addClass("can-open"),e.push(t),this.initEntryDom(e)):($(".home_nav").addClass("can-open"),this.initEntryDom(e))},initEntryDom:function(e){var t="";$.each(e,function(e,a){var i=new Date,n=Date.parse(a.endTime.replace(/-/g,"/"));className="1"==a.new&&n>i.getTime()?"new-entry "+a.class:a.class,t+='<li class="'+className+'"><a href="'+a.url+"\" onclick=\"PTTSendClick('quickLink','item"+(e+1)+"','"+a.name+"');\"><i></i><span>"+a.name+"</span></a></li>"}),$(".entry-list").html(t),$(".home_nav").addClass("open"),$("#barba-wrapper").on("click",".entry-btn",function(){$(".home_nav").hasClass("open")?($(".entry-container").scrollTo({toT:0,dir:"left",durTime:0}),$(".entry-name").text("展开"),$(".home_nav").removeClass("open")):($(".entry-name").text("收起"),$(".home_nav").addClass("open"))})},initHeroImg:function(){window.tab2=new mo.Slide({target:$("#hero-slide .slide_content li"),autoPlay:!0,stay:3e3,animateTime:500,direction:"x",controller:!0,title:{dataWrap:$("#hero-slide .title_content"),delay:300},event:{beforechange:function(){$("#hero-slide .title_wrap").animate({opacity:.25,translateY:"50px"},300,"ease-out"),window.setTimeout(function(){$("#hero-slide .title_wrap").animate({opacity:1,translateY:"0"},300,"ease-out")},500)}}})},initPageScroll:function(){$(".section").addScroll({activeClass:"active",topOffset:100,scrollFunc:{news:function(){window.heroSlide=new IndexSlide({container:".news-slide",changeCallback:IndexObj.slideCallback})},heroImg:function(){IndexObj.initHeroImg()},hero:function(){Hero.init()},videos:function(){Video.init()},strategy:function(){Strategy.init()}}})},slideCallback:function(e,t){IndexObj.initNews(e)},bindEvent:function(){$(".pop-video-close").click(function(){$(".video_mask").hide(),$("#mod_player").html(""),$("#video_pop").hide()}),$("#pop-close").click(function(){$("#home-pop").hide()}),$(".home_bottom li").removeClass("currentL").eq(0).addClass("currentL"),$("#tgax-wrapper").on("click",".news-slide-wrapper a",function(e){e.preventDefault();var t=$(this).attr("href");switch($(this).data("type")){case"热门":PTTSendClick("notic","hot_details","热门详情"),window.location.href=t;break;case"新闻":PTTSendClick("notic","news_details","新闻详情"),window.location.href=t;break;case"公告":PTTSendClick("notic","notice_details","公告详情"),window.location.href=t;break;case"活动":PTTSendClick("notic","event_details","活动详情"),window.location.href=t;break;case"赛事":PTTSendClick("notic","match_details","赛事详情"),window.location.href=t;break;default:return}})},resize:function(){$(".wrap").css("opacity",0),setTimeout(function(){$(window).height()>$(window).width()?(isLad=!1,$("html").css("font-size",document.documentElement.clientWidth/750*100+"px"),$("#wrap").removeClass("landscape"),$("#wrap").addClass("portrait"),$(".video_mask").height($(document).height())):(isLad=!0,$("html").css("font-size",document.documentElement.clientWidth/1334*100+"px"),$("#wrap").removeClass("portrait"),$("#wrap").addClass("landscape")),$(".wrap").css("opacity",1),$(".pop-video").css("opacity",1)},50)}};$(function(){IndexObj.initPopVideo(),IndexObj.initAd(),IndexObj.bindEvent(),IndexObj.getQuickEntry();var e=setTimeout(function(){IndexObj.initPageScroll(),clearTimeout(e)},100)});